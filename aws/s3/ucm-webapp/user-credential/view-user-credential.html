<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="description" content="PFT" />
    <meta name="author" content="Ong Zhi Xian" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UCM</title>
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="/css/normalize.css" />
    <link rel="stylesheet" href="/css/skeleton.css" />
    <link rel="stylesheet" href="/css/site.css" />
    <link rel="icon" type="image/png" href="/images/favicon.png" />

    <script src="/js/site.js" defer></script>
    <script src="/components/site-banner.js" defer></script>
    <script src="/components/site-navigation-bar.js" defer></script>
    <script src="/user-credential/components/user-credential-module.js" type="module" defer></script>
    <script src="/user-credential/components/view-user-credential-form.js" type="module" defer></script>

</head>
<body>

    <div class="container">

        <site-banner></site-banner>

        <site-navigation-bar></site-navigation-bar>

        <view-user-credential-form id="myComponent"></view-user-credential-form>

        <a href="/user-credential">Back to user credential list.</a>
        <!-- <button id="testButton">Test change state</button> -->
    </div>

    <template id="viewUserCredentialTemplate">
        <link rel="stylesheet" href="/css/normalize.css" />
        <link rel="stylesheet" href="/css/skeleton.css" />
        <link rel="stylesheet" href="/css/site.css" />
        <div>
            <h2>User Details</h2>
            <!-- <p>Username received: <strong id="username-strong">N/A</strong></p> -->
        </div>
        <form>
            <div class="row">
                <div class="three columns">
                    <label for="usernameDisplay">Username</label>
                    <span id="usernameDisplay">N/A</span>
                    <!-- <input class="u-full-width" type="email" placeholder="test@mailbox.com" id="exampleEmailInput"> -->
                </div>

                <div class="three columns">
                    <label for="lastLoginDisplay">Last login</label>
                    <span id="lastLoginDisplay">N/A</span>
                </div>

                <div class="three columns">
                    <label for="failedAttemptsDisplay">Failed attempts</label>
                    <span id="failedAttemptsDisplay">N/A</span>
                </div>

                <div class="three columns">
                    <label for="lastFailedAttemptDisplay">Last failed attempt</label>
                    <span id="lastFailedAttemptDisplay">N/A</span>
                </div>


            </div>
            &nbsp;
            <div class="row">
                <div class="six columns">
                    <label for="statusSelect">Status</label>
                    <select class="u-full-width" id="statusSelect">
                        <option value="NEW">New</option>
                        <option value="ACTIVE">Active</option>
                        <option value="INACTIVE">Inactive</option>
                    </select>
                </div>
            </div>

            <div class="row action">
                <button class="button-primary" type="button" id="updateButton">Update</button>
            </div>
            
        </form>
    </template>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const usernameFromUrl = urlParams.get('username'); // Get the value of the 'username' query parameter

            const userCredentialFormComponent = document.querySelector('view-user-credential-form');
            if (userCredentialFormComponent && usernameFromUrl) {
                userCredentialFormComponent.setAttribute('username', usernameFromUrl);
            }

            // For testing
            // const testButton = document.getElementById('testButton');
            // testButton.addEventListener('click', (e) => {
            //     userCredentialFormComponent.setAttribute('username', 'zxczc');
            // });

        });


    </script>
</body>
</html>
